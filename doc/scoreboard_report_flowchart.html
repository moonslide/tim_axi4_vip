<!DOCTYPE html>
<html>
<head>
    <title>AXI4 Scoreboard Report Phase Flowchart</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            color: #003366;
            text-align: center;
        }
        .description {
            margin: 20px 0;
            padding: 15px;
            background-color: #e6f2ff;
            border-left: 4px solid #003366;
        }
        .flowchart {
            text-align: center;
            margin: 20px 0;
        }
        .code-example {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AXI4 Scoreboard Report Phase</h1>
        
        <div class="description">
            <h2>Overview</h2>
            <p>The report phase is the final phase in the UVM test execution where the scoreboard 
            summarizes all transaction results and determines the overall test status.</p>
        </div>
        
        <div class="flowchart">
            <?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .box { fill: #e6f2ff; stroke: #003366; stroke-width: 2; }
      .decision { fill: #ffe6e6; stroke: #cc0000; stroke-width: 2; }
      .process { fill: #f0f8ff; stroke: #004080; stroke-width: 2; }
      .output { fill: #e6ffe6; stroke: #006600; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; }
      .title { font-size: 20px; font-weight: bold; fill: #003366; }
      .arrow { fill: none; stroke: #333333; stroke-width: 2; marker-end: url(#arrowhead); }
      .label { font-size: 12px; fill: #666666; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" class="text title">AXI4 Scoreboard Report Phase Flowchart</text>
  
  <!-- Start -->
  <rect x="300" y="60" width="200" height="40" rx="20" class="box"/>
  <text x="400" y="85" class="text">report_phase() Start</text>
  
  <!-- Check if scoreboard enabled -->
  <polygon points="400,140 500,180 400,220 300,180" class="decision"/>
  <text x="400" y="185" class="text">Scoreboard</text>
  <text x="400" y="200" class="text">Enabled?</text>
  
  <!-- Arrow from start to decision -->
  <line x1="400" y1="100" x2="400" y2="140" class="arrow"/>
  
  <!-- No path -->
  <text x="250" y="175" class="label">No</text>
  <line x1="300" y1="180" x2="150" y2="180" class="arrow"/>
  <rect x="50" y="160" width="100" height="40" rx="5" class="output"/>
  <text x="100" y="185" class="text">Exit</text>
  
  <!-- Yes path -->
  <text x="420" y="240" class="label">Yes</text>
  <line x1="400" y1="220" x2="400" y2="260" class="arrow"/>
  
  <!-- Collect statistics -->
  <rect x="250" y="260" width="300" height="60" rx="5" class="process"/>
  <text x="400" y="285" class="text">Collect Transaction Statistics</text>
  <text x="400" y="305" class="text">(Total, Pass, Fail, Pending)</text>
  
  <line x1="400" y1="320" x2="400" y2="360" class="arrow"/>
  
  <!-- Check for mismatches -->
  <polygon points="400,360 500,400 400,440 300,400" class="decision"/>
  <text x="400" y="395" class="text">Any Response</text>
  <text x="400" y="410" class="text">Mismatches?</text>
  
  <!-- Yes - Report errors -->
  <text x="520" y="395" class="label">Yes</text>
  <line x1="500" y1="400" x2="600" y2="400" class="arrow"/>
  
  <rect x="600" y="370" width="180" height="60" rx="5" class="process"/>
  <text x="690" y="395" class="text">Report Error Details</text>
  <text x="690" y="415" class="text">(Address, Expected, Actual)</text>
  
  <line x1="690" y1="430" x2="690" y2="480" class="arrow"/>
  <line x1="690" y1="480" x2="400" y2="480" class="arrow"/>
  
  <!-- No - Continue -->
  <text x="420" y="460" class="label">No</text>
  <line x1="400" y1="440" x2="400" y2="480" class="arrow"/>
  
  <!-- Check for pending transactions -->
  <polygon points="400,500 500,540 400,580 300,540" class="decision"/>
  <text x="400" y="535" class="text">Pending</text>
  <text x="400" y="550" class="text">Transactions?</text>
  
  <!-- Yes - Report pending -->
  <text x="520" y="535" class="label">Yes</text>
  <line x1="500" y1="540" x2="600" y2="540" class="arrow"/>
  
  <rect x="600" y="510" width="180" height="60" rx="5" class="process"/>
  <text x="690" y="535" class="text">Report Pending</text>
  <text x="690" y="555" class="text">Transaction IDs</text>
  
  <line x1="690" y1="570" x2="690" y2="620" class="arrow"/>
  <line x1="690" y1="620" x2="400" y2="620" class="arrow"/>
  
  <!-- No - Continue -->
  <text x="420" y="600" class="label">No</text>
  <line x1="400" y1="580" x2="400" y2="620" class="arrow"/>
  
  <!-- Generate summary report -->
  <rect x="250" y="640" width="300" height="80" rx="5" class="process"/>
  <text x="400" y="665" class="text">Generate Summary Report</text>
  <text x="400" y="685" class="text">- Total Transactions: X</text>
  <text x="400" y="705" class="text">- Pass/Fail/Pending Counts</text>
  
  <line x1="400" y1="720" x2="400" y2="760" class="arrow"/>
  
  <!-- Determine test status -->
  <polygon points="400,760 500,800 400,840 300,800" class="decision"/>
  <text x="400" y="795" class="text">All Tests</text>
  <text x="400" y="810" class="text">Passed?</text>
  
  <!-- Pass -->
  <text x="250" y="795" class="label">Yes</text>
  <line x1="300" y1="800" x2="200" y2="800" class="arrow"/>
  <rect x="50" y="770" width="150" height="60" rx="5" class="output"/>
  <text x="125" y="795" class="text">UVM_INFO:</text>
  <text x="125" y="815" class="text">"TEST PASSED"</text>
  
  <!-- Fail -->
  <text x="520" y="795" class="label">No</text>
  <line x1="500" y1="800" x2="600" y2="800" class="arrow"/>
  <rect x="600" y="770" width="150" height="60" rx="5" class="output"/>
  <text x="675" y="795" class="text">UVM_ERROR:</text>
  <text x="675" y="815" class="text">"TEST FAILED"</text>
  
  <!-- End -->
  <line x1="125" y1="830" x2="125" y2="900" class="arrow"/>
  <line x1="675" y1="830" x2="675" y2="900" class="arrow"/>
  <line x1="125" y1="900" x2="400" y2="900" class="arrow"/>
  <line x1="675" y1="900" x2="400" y2="900" class="arrow"/>
  
  <rect x="300" y="920" width="200" height="40" rx="20" class="box"/>
  <text x="400" y="945" class="text">report_phase() End</text>
</svg>

        </div>
        
        <div class="description">
            <h2>Key Steps:</h2>
            <ol>
                <li><strong>Check Enable Status</strong> - Verify if scoreboard checking is enabled</li>
                <li><strong>Collect Statistics</strong> - Gather counts of total, passed, failed, and pending transactions</li>
                <li><strong>Report Mismatches</strong> - Detail any response mismatches with expected vs actual values</li>
                <li><strong>Report Pending</strong> - List any transactions that didn't complete</li>
                <li><strong>Generate Summary</strong> - Create overall test statistics report</li>
                <li><strong>Determine Status</strong> - Set final test pass/fail status</li>
            </ol>
        </div>
        
        <div class="code-example">
            <h3>Code Example:</h3>
            <pre>
function void report_phase(uvm_phase phase);
    super.report_phase(phase);
    
    if (!enable_scoreboard) return;
    
    // Collect statistics
    int total_tx = write_tx_count + read_tx_count;
    int pass_count = matched_responses;
    int fail_count = mismatched_responses;
    int pending_count = pending_queue.size();
    
    // Report any mismatches
    if (fail_count > 0) begin
        foreach(error_queue[i]) begin
            `uvm_error("SCOREBOARD", 
                $sformatf("Mismatch at addr=%0h: Expected=%s, Actual=%s",
                error_queue[i].addr, 
                error_queue[i].expected,
                error_queue[i].actual))
        end
    end
    
    // Report summary
    `uvm_info("SCOREBOARD", 
        $sformatf("Summary: Total=%0d, Pass=%0d, Fail=%0d, Pending=%0d",
        total_tx, pass_count, fail_count, pending_count), 
        UVM_LOW);
    
    // Final status
    if (fail_count == 0 && pending_count == 0)
        `uvm_info("TEST", "TEST PASSED", UVM_NONE)
    else
        `uvm_error("TEST", "TEST FAILED")
endfunction
            </pre>
        </div>
    </div>
</body>
</html>
